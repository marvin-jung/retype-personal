<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="turbo-cache-control" content="no-cache">

    <title>Apprentice Chef Analysis</title>

    <meta name="description" content="Jisung Jung" />

    <script>(function () { var el = document.documentElement, m = localStorage.getItem("/portfolio/doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="/portfolio/resources/css/retype.css" rel="stylesheet" />

    <script type="text/javascript" src="/portfolio/resources/js/config.js" defer></script>
    <script type="text/javascript" src="/portfolio/resources/js/prism.js" defer></script>
    <script type="text/javascript" src="/portfolio/resources/js/retype.js" defer></script>
</head>
    <body>
        <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
    <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>

    <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
    <div class="container relative flex items-center justify-between flex-grow pr-6 md:justify-start">
        <!-- Mobile menu button skeleton -->
        <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center flex-shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px flex-shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
        <div v-cloak id="docs-sidebar-toggle"></div>

        <!-- Logo -->
        <div class="flex items-center justify-between h-full py-2 md:w-75">
            <div class="flex items-center px-2 md:px-6">
                <a id="docs-site-logo" href="/portfolio/" class="flex items-center leading-snug text-2xl">
                    <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">Marvin Jung</span>
                </a>
            </div>

            <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
        </div>

        <div class="flex justify-between md:flex-grow">
            <!-- Top Nav -->
            <nav class="hidden md:flex">
    <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="https://marvin-jung.github.io/portfolio/">Home</a>
        </li>
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="https://github.com/marvin-jung/">GitHub</a>
        </li>
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="Jisung_Jung_Resume.docx">Resume</a>
        </li>
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="https://linkedin.com/in/mrvnjung/">Linkedin</a>
        </li>
    </ul>
</nav>

            <!-- Header Right Skeleton -->
            <div v-cloak class="flex justify-end flex-grow skeleton">

                <!-- Search input mock -->
                <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                    <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                    </div>

                    <input class="w-full h-10 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 placeholder-gray-400 dark:placeholder-dark-400"
                    style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search docs" />
                </div>

                <!-- Mobile search button mock -->
                <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                </div>

                <!-- Dark mode switch placehokder -->
                <div class="w-10 h-10 lg:ml-2"></div>

                <!-- History button mock -->
                <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                </div>
            </div>

            <div v-cloak class="flex items-center justify-end flex-grow">
                <div id="docs-mobile-search-button"></div>
                <doc-search-desktop></doc-search-desktop>

                <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                <doc-history></doc-history>
            </div>
        </div>
    </div>
</header>


    <div class="container relative flex bg-white">
        <!-- Sidebar Skeleton -->
<div v-cloak class="fixed flex flex-col flex-shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">

    <!-- Render this div, if config.showSidebarFilter is `true` -->
    <div class="flex items-center h-16 px-6">
        <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter" />
    </div>

    <div class="pl-6 mb-4 mt-1">
        <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
    </div>

    <div class="flex-shrink-0 mt-auto bg-transparent dark:border-dark-650">
        <a
    class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in"
    target="_blank"
    href="https://retype.com"
    rel="noopener"
>
    <span class="text-xs whitespace-nowrap">Powered by</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
</a>

    </div>
</div>

<!-- Sidebar component -->
<doc-sidebar v-cloak>
    <template #sidebar-footer>
        <div
            class="flex-shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650"
        >

            <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                <nav>
                    <ul class="flex flex-wrap justify-center items-center">
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://marvin-jung.github.io/portfolio/">Home</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/marvin-jung/">GitHub</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="Jisung_Jung_Resume.docx">Resume</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://linkedin.com/in/mrvnjung/">Linkedin</a>
                        </li>
                    </ul>
                </nav>
            </div>

            <a
    class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in"
    target="_blank"
    href="https://retype.com"
    rel="noopener"
>
    <span class="text-xs whitespace-nowrap">Powered by</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
</a>

        </div>
    </template>
</doc-sidebar>


        <div class="flex-grow min-w-0 dark:bg-dark-850">
            <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
            <div class="flex">
    <div class="flex-grow min-w-0 px-6 md:px-16">
        <main class="relative pt-6 pb-16">
            <div class="docs-markdown" id="docs-content">
                <!-- Rendered if sidebar right is enabled -->
                <div id="docs-sidebar-right-toggle"></div>
               
                <!-- Page content  -->
<doc-anchor-target id="apprentice-chef-analysis" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#apprentice-chef-analysis">#</doc-anchor-trigger>
        <span>Apprentice Chef Analysis</span>
    </h1>
</doc-anchor-target>
<p>Jisung Jung</p>
<p><figure class="content-center">
    <img src="../images/meal-prep-kits.png" alt="" />
    <figcaption class="caption"></figcaption>
</figure>
</p>
<p>Original Notebooks</p>
<ul>
<li>A1 - <a href="../scripts/a1-classification-model-development.zip">Classification Model Development.ipynb</a></li>
<li>A2 - <a href="../scripts/a2-regression-model-development.zip">Regression Model Development.ipynb</a></li>
<li>A3 - <a href="../scripts/a3-analysis-report.zip">Analysis Report.ipynb</a></li>
</ul>
<doc-anchor-target id="introduction">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#introduction">#</doc-anchor-trigger>
        <span>Introduction</span>
    </h2>
</doc-anchor-target>
<p>Apprentice Chef operates the online platform and mobile app bringing a daily-prepared cooking meal delivered to the customer&#x27;s door. The executives at the company requested to take on an analytics project to reveal how much revenue to expect from each customer within their 1st year of orders and to reveal which customers will subscribe to a wine cross-selling service.</p>
<doc-anchor-target id="analyzing-the-model-results">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#analyzing-the-model-results">#</doc-anchor-trigger>
        <span>Analyzing the model results</span>
    </h2>
</doc-anchor-target>
<p>We implemented four log-transformed modeling techniques. Out of these 4 models, OLS got the highest testing score: 0.753. And the least square fitted line is explained by</p>
<blockquote>
<p>Estimated log <strong>Revenue</strong> = 1.89 + 0.51 log(<strong>Average video playing time</strong>) - 0.22 (<strong>Contact with customer service over 10</strong>) - 0.17 log(<strong>unique meal sets ordered</strong>) + ...... + 0.01 (<strong>passport.com</strong>)</p>
</blockquote>
<p>R-Square (0.758) recognized at OLS results in statsmodels. 32 explanatory variables were less than 0.05 p-value and affected revenue rates. The result interprets that revenue is sensitive at playing time of meal prep instruction video and high contacts with customer service. A 1% increase in average video time is associated with a 0.51% change in revenue. And one increase in the number of times contacts with customer service larger than 10 is associated with a -0.22% change in revenue.</p>
<p>On that note, we can anticipate that customers tend to make meals manageable after watching the video for meal prep instruction explaining cooking directions and process. Therefore, providing amusing and appeticious video (ex. Tiktok clips) could help customers to attract to buy back and be less likely to churn. Also, the company should focus and increase more seamless communication channels with meaningful conversations with customers such as blogs, discussion boards, and online communities to minimize the number of contacts with customer service.</p>
<hr />
<p>Out of five classification models, CART got the highest AUC score: 0.726. 10 explanatory variables contributed to the model accuracy. We recognized that the lengths of name, domain groups, revenue are contributed to the separation in cross-selling-success.</p>
<p>From the username fields in the excel dataset, 592 users do not record the last name. 292 users not recording the last name demonstrated 0 in cross-selling-success, were made up 47% (= 292 / 625) in the cross-selling failures. We could guess the reason from the customer journey. As we know, there is an optional step submitting a picture of the ID card to purchase alcohol which is allowing at least 21 years of age. Probably, 47% of people of total cross-selling failures are likely to either teenagers or inconvenient users in ID verification so that buying alcohol is denied accordingly. In this regard, we need to consider the ID verification process easy and facilitate ways of existing customers to enter their last name and submit a picture of ID card without any trouble.</p>
<hr />
<doc-anchor-target id="conclusion">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#conclusion">#</doc-anchor-trigger>
        <span>Conclusion</span>
    </h2>
</doc-anchor-target>
<p>In a pandemic era, everyone has difficulty heading out to a restaurant or grocery store, step into a bar to drink liquors. But people still love to eat great meals with wellness shots, so there must be popular demands on taking the meal kit delivery goods to cook an efficient and convenient way. With the data analysis and predictive model, we have to detect the consumer behaviors and make the business stay relevant to existing and potential customers. Like providing amusing and appeticious videos or rearranging the customer journey would grow revenue and increase business success.</p>
<hr />
<doc-anchor-target id="appendix">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#appendix">#</doc-anchor-trigger>
        <span>Appendix</span>
    </h2>
</doc-anchor-target>
<p><strong>I. OLS showed the highest testing score: 0.753</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-python"><code v-pre class="language-python">########################################
# checking model performances
########################################
import pandas as pd

# specifying the path and file name
file = &quot;./model_results/linear_model_performance.xlsx&quot;

# reading the file into Python
model_performance = pd.read_excel(file)


model_performance.sort_values(by = 'Testing',
                              ascending = False)</code></pre>
</doc-codeblock></div>
<p><figure class="content-center">
    <img src="../images/ml-testing-score-1.jpg" alt="" />
    <figcaption class="caption"></figcaption>
</figure>
</p>
<p><strong>II. The least square fitted line is explained by following coefficients</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-python"><code v-pre class="language-python">import pandas as pd
from sklearn.model_selection import train_test_split # train/test split
from sklearn.linear_model import LinearRegression

# specifying the path and file name
file = &quot;./datasets/apprenticechef_feature_rich.xlsx&quot;

# reading the file into Python
apprenticechef = pd.read_excel(file)

# Rename and Declaring set of x-variables 
apprenticechef.rename(columns = {'log_REVENUE':'Log Revenue', 'log_TOTAL_MEALS_ORDERED':'Log Total number of meals ordered',
                                 'log_UNIQUE_MEALS_PURCH':'Log unique meal sets ordered', 'log_AVG_PREP_VID_TIME':'Log Average video playing time',
                                 'log_LARGEST_ORDER_SIZE':'Log Average number of meals ordered', 'MASTER_CLASSES_ATTENDED':'Attended a master cooking class',
                                 'CONTACTS_W_CUSTOMER_SERVICE':'Contacts with customer service', 'MEDIAN_MEAL_RATING':'Median rating of meal sets',
                                 'TOTAL_PHOTOS_VIEWED':'Total number of clicks on photos', 'have_CANCELLATIONS_AFTER_NOON':'Meals canceled After 12pm over 0 count',
                                 'have_PHOTOS_VIEWED':'Total number of clicks on photos over 0 count', 'thld_UNIQUE_MEALS_PURCH':'Unique meal sets ordered over 9',
                                 'thld_CONTACTS_W_CUSTOMER_SERVICE':'Contacts with customer service over 10', 'thld_AVG_CLICKS_PER_VISIT':'Average number of clicks per visit over 10',
                                 'thld_MASTER_CLASSES_ATTENDED':'Attended a master cooking class over 2', 'thld_MEDIAN_MEAL_RATING':'Median rating of meal sets over 4',
                                 'aol':'aol.com', 'gmail':'gmail.com', 'hotmail':'hotmail.com', 'live':'live.com',
                                 'me':'me.com', 'msn':'msn.com', 'passport':'passport.com', 'protonmail':'protonmail.com',
                                 'yahoo':'yahoo.com', 'junk':'junk domains', 'personal':'personal domains', 'professional':'professional domains',
                                 'unknown':'unknown gender'         
                                 }, inplace = True) 

# preparing explanatory variable data
x_variables = ['Log Total number of meals ordered', 'Log unique meal sets ordered', 'Contacts with customer service',
               'Log Average video playing time', 'Log Average number of meals ordered', 'Attended a master cooking class', 
               'Median rating of meal sets', 'Total number of clicks on photos', 'Meals canceled After 12pm over 0 count',
               'Total number of clicks on photos over 0 count', 'Unique meal sets ordered over 9', 'Contacts with customer service over 10',
               'Average number of clicks per visit over 10', 'Attended a master cooking class over 2', 'Median rating of meal sets over 4',
               'aol.com', 'gmail.com', 'hotmail.com', 'live.com', 'me.com', 'msn.com', 'passport.com', 'protonmail.com',
               'yahoo.com', 'junk domains', 'personal domains', 'professional domains', 'landline', 'mobile', 'female', 'male', 
               'unknown gender']

ols_data = apprenticechef[x_variables]
log_apprenticechef_target = apprenticechef.loc[ : , 'Log Revenue']

###############################################
## setting up more than one train-test split ##
###############################################

# In train-test split, random_state is set to 219 and test_size is set to 0.25

# OLS p-value x-dataset (log Y)
X_train_OLS, X_test_OLS, y_train_OLS, y_test_OLS = train_test_split(
             ols_data,                    # x-variables
             log_apprenticechef_target,   # y-variable
             test_size = 0.25,
             random_state = 219)

# INSTANTIATING a model object
lr = LinearRegression()

# FITTING to the training data
lr_fit = lr.fit(X_train_OLS, y_train_OLS)

# PREDICTING on new data
lr_pred = lr_fit.predict(X_test_OLS)

# zipping each feature name to its coefficient
lr_model_values = zip(apprenticechef[x_variables].columns,
                      lr_fit.coef_.round(decimals = 2))


# setting up a placeholder list to store model features
lr_model_lst = [('intercept', lr_fit.intercept_.round(decimals = 2))]


# printing out each feature-coefficient pair one by one
for val in lr_model_values:
    lr_model_lst.append(val)
    

# checking the results
for pair in lr_model_lst:
    print(pair)</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">('intercept', 1.89)
('Log Total number of meals ordered', 0.14)
('Log unique meal sets ordered', -0.17)
('Contacts with customer service', 0.02)
('Log Average video playing time', 0.51)
('Log Average number of meals ordered', -0.13)
('Attended a master cooking class', 0.03)
('Median rating of meal sets', 0.05)
('Total number of clicks on photos', 0.0)
('Meals canceled After 12pm over 0 count', -0.01)
('Total number of clicks on photos over 0 count', 0.01)
('Unique meal sets ordered over 9', 0.12)
('Contacts with customer service over 10', -0.22)
('Average number of clicks per visit over 10', -0.08)
('Attended a master cooking class over 2', -0.09)
('Median rating of meal sets over 4', -0.16)
('aol.com', 0.02)
('gmail.com', 0.0)
('hotmail.com', -0.01)
('live.com', 0.0)
('me.com', -0.02)
('msn.com', -0.0)
('passport.com', 0.01)
('protonmail.com', -0.01)
('yahoo.com', 0.02)
('junk domains', 0.0)
('personal domains', 0.0)
('professional domains', -0.0)
('landline', -0.0)
('mobile', 0.0)
('female', 0.0)
('male', 0.0)
('unknown gender', -0.0)</code></pre>
</doc-codeblock></div>
<p><strong>III. R-Square (0.758) could recognize at OLS results in statsmodels. 32 explanatory variables were less than 0.05 p-value and affected revenue rates.</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-python"><code v-pre class="language-python">import statsmodels.formula.api as smf                

# specifying the path and file name
file = &quot;./datasets/apprenticechef_feature_rich.xlsx&quot;

# reading the file into Python
apprenticechef = pd.read_excel(file)

# Rename x-variables 
apprenticechef.rename(columns = {'log_REVENUE':'Log_Revenue', 'log_TOTAL_MEALS_ORDERED':'Log_Total_number_of_meals_ordered',
                                 'log_UNIQUE_MEALS_PURCH':'Log_unique_meal_sets_ordered', 'log_AVG_PREP_VID_TIME':'Log_Average_video_playing_time',
                                 'log_LARGEST_ORDER_SIZE':'Log_Average_number_of_meals_ordered', 'MASTER_CLASSES_ATTENDED':'Attended_a_master_cooking_class',
                                 'CONTACTS_W_CUSTOMER_SERVICE':'Contacts_with_customer_service', 'MEDIAN_MEAL_RATING':'Median_rating_of_meal_sets',
                                 'TOTAL_PHOTOS_VIEWED':'Total_number_of_clicks_on_photos', 'have_CANCELLATIONS_AFTER_NOON':'Meals_canceled_After_12pm_over_0_count',
                                 'have_PHOTOS_VIEWED':'Total_number_of_clicks_on_photos_over_0_count', 'thld_UNIQUE_MEALS_PURCH':'Unique_meal_sets_ordered_over_9',
                                 'thld_CONTACTS_W_CUSTOMER_SERVICE':'Contacts_with_customer_service_over_10', 'thld_AVG_CLICKS_PER_VISIT':'Average_number_of_clicks_per_visit_over_10',
                                 'thld_MASTER_CLASSES_ATTENDED':'Attended_a_master_cooking_class_over_2', 'thld_MEDIAN_MEAL_RATING':'Median_rating_of_meal_sets_over_4',
                                 'aol':'email_aol', 'gmail':'email_gmail', 'hotmail':'email_hotmail', 'live':'email_live',
                                 'me':'email_me', 'msn':'email_msn', 'passport':'email_passport', 'protonmail':'email_protonmail',
                                 'yahoo':'email_yahoo', 'junk':'junk_domains', 'personal':'personal_domains', 'professional':'professional_domains',
                                 'unknown':'unknown_gender'         
                                 }, inplace = True) 

# building a OLS p-value x-dataset model

# Step 1: build a model
lm_best = smf.ols(formula =  &quot;&quot;&quot;Log_Revenue ~ Log_Total_number_of_meals_ordered + Log_unique_meal_sets_ordered +
                                              Contacts_with_customer_service +  
                                              Log_Average_video_playing_time + Log_Average_number_of_meals_ordered + Attended_a_master_cooking_class + 
                                              Median_rating_of_meal_sets + Total_number_of_clicks_on_photos +                          
                                              Meals_canceled_After_12pm_over_0_count + Total_number_of_clicks_on_photos_over_0_count +  
                                              Unique_meal_sets_ordered_over_9 + Contacts_with_customer_service_over_10 + 
                                              Average_number_of_clicks_per_visit_over_10 + Attended_a_master_cooking_class_over_2 + Median_rating_of_meal_sets_over_4 + 
                                              email_aol + email_gmail + email_hotmail + email_live + email_me + email_msn + email_passport + email_protonmail +
                                              email_yahoo + junk_domains + personal_domains + professional_domains +
                                              landline + mobile + female + male + unknown_gender&quot;&quot;&quot;,
                                              data = apprenticechef)

# Step 2: fit the model based on the data
results = lm_best.fit()

# Step 3: analyze the summary output
print(results.summary())</code></pre>
</doc-codeblock></div>
<p><figure class="content-center">
    <img src="../images/ols-regression-results.png" alt="" />
    <figcaption class="caption"></figcaption>
</figure>
</p>
<p><strong>IV. CART (named as Pruned Tree) got the highest AUC score: 0.726</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-python"><code v-pre class="language-python">########################################
# checking model performances
########################################
import pandas as pd

# specifying the path and file name
file = &quot;./model_results/classification_model_performance.xlsx&quot;

# reading the file into Python
model_performance = pd.read_excel(file)


model_performance.sort_values(by = 'AUC Score',
                              ascending = False)</code></pre>
</doc-codeblock></div>
<p><img src="../images/ml-testing-score-2.jpg" style="zoom:50%;" /> <br></p>
<p><strong>V. 10 explanatory variables contributed to the model accuracy.</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-python"><code v-pre class="language-python">import pandas as pd
from sklearn.model_selection import train_test_split # train/test split
import matplotlib.pyplot as plt # data visualization
import seaborn as sns # enhanced data visualization
from sklearn.tree import DecisionTreeClassifier      # classification trees
from sklearn.tree import export_graphviz             # exports graphics
from six import StringIO                             # saves objects in memory
from IPython.display import Image                    # displays on frontend
import pydotplus                                     # interprets dot objects

# specifying the path and file name
file = &quot;./datasets/apprenticechef_feature_class.xlsx&quot;

# reading the file into Python
apprenticechef = pd.read_excel(file)

# Rename x-variables 
apprenticechef.rename(columns = {'REVENUE':'Revenue', 'CANCELLATIONS_BEFORE_NOON':'Meals canceled before 12pm',
                                 'TASTES_AND_PREFERENCES':'Specified their tastes and preferences',
                                 'PC_LOGINS':'Logins to the website', 'EARLY_DELIVERIES':'Deliveries arrived early',
                                 'REFRIGERATED_LOCKER':'Locker has refrigerated compartments', 'MASTER_CLASSES_ATTENDED':'Attended a master cooking class',
                                 'personal':'personal domains', 'professional':'professional domains', 'number_of_names':'Lengths of name'      
                                 }, inplace = True) 

# preparing explanatory variable data
apprenticechef_data = apprenticechef.drop(['CROSS_SELL_SUCCESS', 'NAME', 'EMAIL', 'FIRST_NAME', 'FAMILY_NAME'],
                                            axis = 1)

# preparing response variables
apprenticechef_target = apprenticechef.loc[ : , 'CROSS_SELL_SUCCESS']


# creating a dictionary to store candidate models
candidate_dict = {
    
  # significant variables only (set 2)
    
 'logit_sig_2'    : ['Revenue', 'Meals canceled before 12pm', 'Specified their tastes and preferences', 'Logins to the website', 
                     'Deliveries arrived early', 'Locker has refrigerated compartments', 'Attended a master cooking class',
                     'personal domains', 'professional domains', 'Lengths of name']
}

# train/test split with the full model
apprenticechef_data   =  apprenticechef.loc[ : , candidate_dict['logit_sig_2']]
apprenticechef_target =  apprenticechef.loc[ : , 'CROSS_SELL_SUCCESS']


# This is the exact code we were using before
X_train, X_test, y_train, y_test = train_test_split(
            apprenticechef_data,
            apprenticechef_target,
            test_size    = 0.25,
            random_state = 219,
            stratify     = apprenticechef_target)


########################################
# plot_feature_importances
########################################
def plot_feature_importances(model, train, export = False):
    &quot;&quot;&quot;
    Plots the importance of features from a CART model.
    
    PARAMETERS
    ----------
    model  : CART model
    train  : explanatory variable training data
    export : whether or not to export as a .png image, default False
    &quot;&quot;&quot;
    
    # declaring the number
    n_features = X_train.shape[1]
    
    # setting plot window
    fig, ax = plt.subplots(figsize=(12,9))
    
    plt.barh(range(n_features), model.feature_importances_, align='center')
    plt.yticks(pd.np.arange(n_features), train.columns)
    plt.title(&quot;10 explanatory variables contributed to the model accuracy&quot;)
    plt.xlabel(&quot;Feature importance&quot;)
    plt.ylabel(&quot;Feature&quot;)
    
    if export == True:
        plt.savefig('./analysis_images/Feature_Importance.png')

# INSTANTIATING a classification tree object
pruned_tree = DecisionTreeClassifier(max_depth = 5,
                                     min_samples_leaf = 17,
                                     criterion = 'entropy',
                                     random_state = 219)

# FITTING the training data
pruned_tree_fit  = pruned_tree.fit(X_train, y_train)


# PREDICTING on new data
pruned_tree_pred = pruned_tree_fit.predict(X_test)


# plotting feature importance
plot_feature_importances(pruned_tree_fit,
                         train  = X_train,
                         export = False)</code></pre>
</doc-codeblock></div>
<p><figure class="content-center">
    <img src="../images/explanatory-variables.png" alt="" />
    <figcaption class="caption"></figcaption>
</figure>
</p>




                <!-- Required only on API pages -->
                <doc-toolbar-member-filter-no-results />
            </div>

            
<nav class="flex mt-14">
    <div class="w-1/2">
        <a class="px-5 py-4 h-full flex items-center break-all md:break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="/portfolio/">
            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
            <span>
                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                <span class="block mt-1">Index</span>
            </span>
        </a>
    </div>

    <div class="w-1/2">
        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-all md:break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="/portfolio/featured-projects/intel-asia-pacific---the-catch--win-campaign">
            <span>
                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                <span class="block mt-1">Intel Asia-Pacific : The Catch &amp; Win Campaign</span>
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
        </a>
    </div>
</nav>


        </main>

        <div class="border-t dark:border-dark-650 pt-6 mb-8">
            <footer class="flex flex-wrap items-center justify-between">
    <div>
        <ul class="flex flex-wrap items-center text-sm">
</ul>

    </div>
    <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2020 - 2021 Marvin Jung, All rights reserved.</p>
</div>
</footer>

        </div>
    </div>
    
    <!-- Rendered if sidebar right is enabled -->
    <!-- Sidebar right skeleton-->
    <div v-cloak class="fixed top-0 bottom-0 right-0 transform translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:flex-shrink-0 lg:pt-6 lg:transform-none lg:w-56 lg:z-0 md:w-72 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
        <div class="pl-5">
            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
        </div>
    </div>
    
    <!-- User should be able to hide sidebar right -->
    <doc-sidebar-right v-cloak></doc-sidebar-right>
</div>

        </div>
    </div>

    <doc-search-mobile></doc-search-mobile>
    <doc-back-to-top></doc-back-to-top>
</div>


        <div id="docs-overlay-target"></div>

        <script>window.__DOCS__ = { "title": "Apprentice Chef Analysis", icon: "file" }</script>
    </body>
</html>
